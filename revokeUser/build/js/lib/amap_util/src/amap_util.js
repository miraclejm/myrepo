!function(e){"use strict";function n(){var e={},n=navigator.userAgent,o=n.match(/(Android);?[\s\/]+([\d.]+)?/),t=n.match(/(iPad).*OS\s([\d_]+)/),r=n.match(/(iPod)(.*OS\s([\d_]+))?/),i=!t&&n.match(/(iPhone\sOS)\s([\d_]+)/);return o&&(e.android=!0,e.version=o[2]),i&&!r&&(e.ios=e.iphone=!0,e.version=i[2].replace(/_/g,".")),t&&(e.ios=e.ipad=!0,e.version=t[2].replace(/_/g,".")),r&&(e.ios=e.ipod=!0,e.version=r[3]?r[3].replace(/_/g,"."):null),e}var o,t={PAGE_SOURCE_KEY:"gd_from",IN_AMAP_KEY:"isInAmap",os:n(),addScript:function(e,n,o){var t=document.createElement("script");return n&&(t.onload=function(){n(t)}),o&&(t.onerror=function(){o(t)}),t.src=e,document.head.appendChild(t),t},extend:function(e,n){for(var o in n)"undefined"!==n[o]&&(e[o]=n[o])},getUrlParam:function(n){var o=e.location.search.substr(1);if(!o)return"";if(o=decodeURI(o),n){var t=new RegExp("(?:^|&)"+n+"=([^&]*)(&|$)","g").exec(o);return t&&e.decodeURIComponent(t[1])||""}for(var r,i={},a=/(?:^|&)([^&=]+)=([^&]*)(?=(&|$))/g;r=a.exec(o);)i[r[1]]=e.decodeURIComponent(r[2]);return i},isInAmap:function(){return o},isInWeixin:function(){return/MicroMessenger/i.test(navigator.userAgent)},isPublic:function(){return/amap\.com/i.test(location.host)&&!/testing/i.test(location.host)},setIsInAmap:function(e){e=e},urlAddParam:function(e,n,o){var t=e.match(/([^\?#]*\??)([^#]*)?(#.*)?/),r=t[1],i=t[2];i?r+=i+"&":-1===t[1].indexOf("?")&&(r+="?");var a="";if("object"==typeof n){for(var c in n)a+="&"+c+"="+encodeURIComponent(n[c]);a=a.substr(1)}else a=n+"="+encodeURIComponent(o);return r+a+(t[3]||"")}};o=!(/_wx\.html?($|[#?])/.test(location.href)||"0"===t.getUrlParam(t.IN_AMAP_KEY)),"undefined"!=typeof module&&"object"==typeof exports?module.exports=t:"function"==typeof define&&(define.amd||define.cmd)?define(t):e.AmapApp={util:t}}(window);